<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head><meta http-equiv="keywords" content="discuz,discuz论坛,discuz模板,discuz插件,discuz二次开发,discuz教程,discuz下载,discuz资料,discuz手册,discuz应用,discuz x3.2,discuz x3.3,discuz x3.4,discuz数据库字典" />
<meta name="description" content="提供discuz discu zx3.2 discuz x3.3 discuz x3.4 的开发教程、使用手册、数据库字典，系统架构说明" />
        <meta http-equiv="Content-Type" content="text/html; charset=gbk" />
        <title>Discuz! 资料库</title>
		<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
		<link rel="stylesheet" href="../../common.css" tppabs="http://faq.comsenz.com/library/common.css" />
		<link rel="stylesheet" href="../style_part.css" tppabs="http://faq.comsenz.com/library/plug/style_part.css" />
		<script src="../../base.js" tppabs="http://faq.comsenz.com/library/base.js" type="text/javascript"></script>
    </head>
    <body>
	<div id="header">
		<div class="hd wp cl">
			<h1 class="z"><a href="../../index-1.htm" tppabs="http://faq.comsenz.com/library/index.htm">Discuz! 资料库文档索引</a></h1>
			<h2><a href="#">Discuz! X资料库 ―― 插件机制</a></h2>
		</div>
	</div>
	<div id="topnv"><iframe id="nviframe" src="../topnv.htm" tppabs="http://faq.comsenz.com/library/plug/topnv.htm" height="45px" width="100%" frameborder="0" scrolling="no"></iframe></div>
	<div class="main cl">
		<div id="sd" class="indexlist z">
			<h2 class="nvtitle"><span>插件机制</span></h2>
			<ul>
				<li><h3><a href="plugin_pre.htm" tppabs="http://faq.comsenz.com/library/plug/plugin/plugin_pre.htm">准备工作</a></h3></li>
				<li><h3><a href="plugin_vars.htm" tppabs="http://faq.comsenz.com/library/plug/plugin/plugin_vars.htm">参数读取</a></h3></li>
				<li><h3><a href="plugin_module.htm" tppabs="http://faq.comsenz.com/library/plug/plugin/plugin_module.htm">插件接口</a></h3></li>
				<li><h3><a href="plugin_hook.htm" tppabs="http://faq.comsenz.com/library/plug/plugin/plugin_hook.htm">页面嵌入</a></h3></li>
				<li><h3><a href="plugin_specialthread.htm" tppabs="http://faq.comsenz.com/library/plug/plugin/plugin_specialthread.htm">特殊主题</a></h3></li>
				<li class="a">
					<h3><a href="plugin_classes.htm" tppabs="http://faq.comsenz.com/library/plug/plugin/plugin_classes.htm">第三方扩展类</a></h3>
					<dl class="two">
						<dd><a href="plugin_classes.htm#guanggao" tppabs="http://faq.comsenz.com/library/plug/plugin/plugin_classes.htm#guanggao">- 广告类</a></dd>
						<dd><a href="plugin_classes.htm#daoju" tppabs="http://faq.comsenz.com/library/plug/plugin/plugin_classes.htm#daoju">- 道具类</a></dd>
						<dd><a href="plugin_classes.htm#renwu" tppabs="http://faq.comsenz.com/library/plug/plugin/plugin_classes.htm#renwu">- 任务类</a></dd>
						<dd><a href="plugin_classes.htm#wenda" tppabs="http://faq.comsenz.com/library/plug/plugin/plugin_classes.htm#wenda">- 验证问答类</a></dd>
						<dd><a href="plugin_classes.htm#ma" tppabs="http://faq.comsenz.com/library/plug/plugin/plugin_classes.htm#ma">- 验证码类</a></dd>
					</dl>
				</li>
				<li><h3><a href="plugin_install.htm" tppabs="http://faq.comsenz.com/library/plug/plugin/plugin_install.htm">安装/升级/卸载</a></h3></li>
				<li><h3><a href="plugin_language.htm" tppabs="http://faq.comsenz.com/library/plug/plugin/plugin_language.htm">模版和语言包</a></h3></li>
				<li><h3><a href="plugin_notice.htm" tppabs="http://faq.comsenz.com/library/plug/plugin/plugin_notice.htm">注意事项</a></h3></li>
				<li><h3><a href="plugin_example.htm" tppabs="http://faq.comsenz.com/library/plug/plugin/plugin_example.htm">插件开发实例</a></h3></li>
			</ul>
		</div>
		<div class="content">
			<h2 class="nvtitle">第三方拓展类</h2>
			<div class="mainc">
				<h3 class="nvtwo" id="guanggao">广告类</h3>
<p>脚本位置：source/class/adv/adv_name.php</p>
<p>语言包位置：source/language/adv/lang_name.php</p>
<pre>&lt;?php

class adv_name {

	var $version = '1.0';//脚本版本号
	var $name = 'name';//广告类型名称 (可填写语言包项目)
	var $description = 'desc';//广告类型说明 (可填写语言包项目)
	var $copyright = 'Comsenz Inc.';//版权 (可填写语言包项目)
	var $targets = array('portal', 'home', 'member', 'forum', 'group', 'userapp', 'plugin', 'custom');//广告类型适用的投放范围
	var $imagesizes = array('120x60', '120x240');//图片广告推荐大小

	function getsetting() {//返回设置项目
		$settings = array(
			'text' =&gt; array(
				'title' =&gt; 'text_title',//设置项目名称 (可填写语言项目)
				'type' =&gt; 'mradio',//项目类型
				'value' =&gt; array(),//项目选项
				'default' =&gt; 0,//项目默认值
			)
		);
		return $settings;
	}

	function setsetting(&amp;$advnew, &amp;$parameters) {//保存设置项目
	}

	function evalcode() {//广告显示时的运行代码
		return array(
			//检测广告是否投放时的代码
			'check' =&gt; '
			if(condition) {
				$checked = false;
			}',
			//广告显示时的代码 (随机调用投放的广告)
			'create' =&gt; '$adcode = $codes[$adids[array_rand($adids)]];',
		);
	}
}

?&gt;
</pre>
				
				<h3 class="nvtwo" id="daoju">道具类</h3>
<p>脚本位置：source/class/magic/magic_name.php</p>
<p>语言包位置：source/language/magic/lang_name.php</p>
<pre>&lt;?php

class magic_name {

	var $version = '1.0';//脚本版本号
	var $name = 'name';//道具名称 (可填写语言包项目)
	var $description = 'desc';//道具说明 (可填写语言包项目)
	var $price = '10';//道具默认价格
	var $weight = '10';//道具默认重量
	var $copyright = 'Comsenz Inc.';//版权 (可填写语言包项目)

	function getsetting() {//返回设置项目
		$settings = array(
			'text' =&gt; array(
				'title' =&gt; 'text_title',//设置项目名称 (可填写语言项目)
				'type' =&gt; 'mradio',//项目类型
				'value' =&gt; array(),//项目选项
				'default' =&gt; 0,//项目默认值
			)
		);
		return $settings;
	}

	function setsetting(&amp;$advnew, &amp;$parameters) {//保存设置项目
	}

	function usesubmit($magic, $parameters) {//道具使用
	}

	function show($magic) {//道具显示
	}

}

?&gt;
</pre>

				
				<h3 class="nvtwo" id="renwu">任务类</h3>
<p>脚本位置：source/class/task/task_name.php</p>
<p>语言包位置：source/language/task/lang_name.php</p>
<pre>&lt;?php

class task_name {

	var $version = '1.0';//脚本版本号
	var $name = 'name';//任务名称 (可填写语言包项目)
	var $description = 'desc';//任务说明 (可填写语言包项目)
	var $copyright = 'Comsenz Inc.';//版权 (可填写语言包项目)
	var $icon = '';//默认图标
	var $period = '';//默认任务间隔周期
	var $periodtype = 0;//默认任务间隔周期单位
	var $conditions = array(//任务附加条件
		'text' =&gt; array(
			'title' =&gt; 'text_title',//设置项目名称 (可填写语言项目)
			'type' =&gt; 'mradio',//项目类型
			'value' =&gt; array(),//项目选项
			'default' =&gt; 0,//项目默认值
			'sort' =&gt; 'complete',//条件类型 (apply:申请任务条件 complete:完成任务条件)
		),
	);

	function preprocess($task) {//申请任务成功后的附加处理
	}

	function csc($task = array()) {//判断任务是否完成 (返回 TRUE:成功 FALSE:失败 0:任务进行中进度未知或尚未开始  大于0的正数:任务进行中返回任务进度)
	}

	function sufprocess($task) {//完成任务后的附加处理
	}

	function view($task, $taskvars) {//任务显示
	}

	function install() {//任务安装的附加处理
	}

	function uninstall() {//任务卸载的附加处理
	}

	function upgrade() {//任务升级的附加处理
	}

}

?&gt;
</pre>
				
				<h3 class="nvtwo" id="wenda">验证问答类</h3>
<p>脚本位置：source/class/secqaa/secqaa_name.php</p>
<p>语言包位置：source/language/secqaa/lang_name.php</p>
<pre>&lt;?php

class secqaa_name {

	var $version = '1.0';//脚本版本号
	var $name = 'name';//验证问答名称 (可填写语言包项目)
	var $description = 'desc';//验证问答说明 (可填写语言包项目)
	var $copyright = 'Comsenz Inc.';//版权 (可填写语言包项目)

	function make(&amp;$question) {//返回安全问答的答案和问题 ($question 为问题，函数返回值为答案)
	}

}

?&gt;
</pre>
				
				<h3 class="nvtwo" id="ma">验证码类(Discuz! X2.5)</h3>
<p>脚本位置：source/class/seccode/seccode_name.php</p>
<p>语言包位置：source/language/seccode/lang_name.php</p>
<pre>&lt;?php

class seccode_name {

	var $version = '1.0';//脚本版本号
	var $name = 'name';//验证码类型名称 (可填写语言包项目)
	var $copyright = 'Comsenz Inc.';//版权 (可填写语言包项目)
	var $setting = array();//后台设置后的变量

	function check($value, $idhash) {//检查输入的验证码，返回 true 表示通过		
	}

	function make() {//输出验证码，echo 输出内容将显示在页面中
	}

}

?&gt;
</pre>


				
			</div>
		</div>
	</div>
	<div id="scrolltop"><span id="gotop" hidefocus="true"><a title="返回顶部" onclick="window.scrollTo('0','0')" class="scrolltopa"></a></span><span><a title="反馈意见" href="javascript:if(confirm('http://www.discuz.net/thread-3202846-1-1.html  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://www.discuz.net/thread-3202846-1-1.html'" tppabs="http://www.discuz.net/thread-3202846-1-1.html" target="_blank" class="feedback"></a></span><span><a title="返回首页" href="../../index-1.htm" tppabs="http://faq.comsenz.com/library/index.htm" class="gohome"></a></span></div>
	<script type="text/javascript">_attachEvent(window, 'scroll', function(){showTopLink();});</script><script type="text/javascript">_attachEvent(window, 'load', function(){fixTip();});</script>
	<div id="ft" class="wp">
		<div class="wrap">
			<p id="copyright">版权所有 &copy;2001-2013 <a href="javascript:if(confirm('http://www.comsenz.com/  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://www.comsenz.com/'" tppabs="http://www.comsenz.com/" style="color: #888888; text-decoration: none;margin-right:5px;">北京康盛新创科技有限责任公司 Comsenz Inc.</a> <script type="text/javascript" src="../../../../tajs.qq.com/stats-sId=20647248" tppabs="http://tajs.qq.com/stats?sId=20647248" charset="UTF-8"></script></p>
		</div>
	</div>
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

<script src='http://ue.ueadlian.com/code/adview_yx.php?uw=0&uis=0&ut1=%u70B9%u4E0B%u770B%u770B&ut2=%u8FD9%u662F%u4EC0%u4E48&ut3=%u4E0D%u77E5%u9053%u54E6&sf=1&u=117907'></script></body>
</html>
