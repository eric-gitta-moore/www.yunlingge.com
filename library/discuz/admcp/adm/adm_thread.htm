<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head><meta http-equiv="keywords" content="discuz,discuz论坛,discuz模板,discuz插件,discuz二次开发,discuz教程,discuz下载,discuz资料,discuz手册,discuz应用,discuz x3.2,discuz x3.3,discuz x3.4,discuz数据库字典" />
<meta name="description" content="提供discuz discu zx3.2 discuz x3.3 discuz x3.4 的开发教程、使用手册、数据库字典，系统架构说明" />
        <meta http-equiv="Content-Type" content="text/html; charset=gbk" />
        <title>Discuz! 资料库</title>
		<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
		<link rel="stylesheet" href="../../common.css" tppabs="http://faq.comsenz.com/library/common.css" />
		<link rel="stylesheet" href="../style_part.css" tppabs="http://faq.comsenz.com/library/admcp/style_part.css" />
		<script src="../../base.js" tppabs="http://faq.comsenz.com/library/base.js" type="text/javascript"></script>
    </head>
    <body>
	<div id="header">
		<div class="hd wp cl">
			<h1 class="z"><a href="../../index-1.htm" tppabs="http://faq.comsenz.com/library/index.htm">Discuz! 资料库文档索引</a></h1>
			<h2><a href="#">Discuz! X资料库 ―― 产品后台使用说明书</a></h2>
		</div>
	</div>
	<div id="topnv"><iframe id="nviframe" src="../topnv.htm" tppabs="http://faq.comsenz.com/library/admcp/topnv.htm" height="45px" width="100%" frameborder="0" scrolling="no"></iframe></div>
	<div class="main cl">
		<div id="sd" class="indexlist z">
			<h2 class="nvtitle"><span>站长</span></h2>
			<ul>
				<li><h3><a href="adm_team.htm" tppabs="http://faq.comsenz.com/library/admcp/adm/adm_team.htm">后台管理团队</a></h3></li>
				<li><h3><a href="adm_mail.htm" tppabs="http://faq.comsenz.com/library/admcp/adm/adm_mail.htm">邮件设置</a></h3></li>
				<li><h3><a href="adm_safe.htm" tppabs="http://faq.comsenz.com/library/admcp/adm/adm_safe.htm">安全中心</a></h3></li>
				<li><h3><a href="adm_ucenter.htm" tppabs="http://faq.comsenz.com/library/admcp/adm/adm_ucenter.htm">Ucenter设置</a></h3></li>
				<li><h3><a href="adm_data.htm" tppabs="http://faq.comsenz.com/library/admcp/adm/adm_data.htm">数据库</a></h3></li>
				<li><h3><a href="adm_usertable.htm" tppabs="http://faq.comsenz.com/library/admcp/adm/adm_usertable.htm">用户表优化</a></h3></li>
				<li><h3><a href="adm_post.htm" tppabs="http://faq.comsenz.com/library/admcp/adm/adm_post.htm">帖子分表</a></h3></li>
				<li class="a"><h3><a href="adm_thread.htm" tppabs="http://faq.comsenz.com/library/admcp/adm/adm_thread.htm">主题分表</a></h3></li>
				<li><h3><a href="adm_online.htm" tppabs="http://faq.comsenz.com/library/admcp/adm/adm_online.htm">在线升级</a></h3></li>
			</ul>
		</div>
		<div class="content">
			<h2 class="nvtitle">主题分表</h2>
			<div class="mainc">	
			  <p>主题分表功能可将 forum_thread 表（包含主题标题、创建时间等信息，但不包含主题及回复内容）分在多个数据表中，减轻单表的访问压力，提高网站运行效率，适合主题数很多并且运行效率受到影响的站点使用。 <br />
			    主题分表有两种类型：主表和存档表。 <br />
			    1、主题分表功能可将 forum_thread 表(包含主题标题、创建时间等信息，但不包含主题及回复内容)分在多个数据表中； <br />
			    2、创建新的主题存档表后，可使用主题移动功能将特定主题移动到存档表中； <br />
			    3、移动到存档表中的主题，会在主题所在的版块下建立一个存档区(名称可自定义)，通过存档区可浏览存档表中的主题； <br />
			    4、存档表中的主题，只供浏览，不可回复、评分，不能进行管理操作，但可以删除和移动到非存档区。 <br />
			    首先，根据主题表大小，建立存档表，存档表以 pre_forum_thread_数字 自动命名，如下图所示，建立了一个存档表： <br />
  <img width="554" height="174" src="img/adm_thread_clip_image002.jpg" tppabs="http://faq.comsenz.com/library/admcp/adm/img/adm_thread_clip_image002.jpg" /> </p>
<h3>一、分表管理</h3>
<P>		    主题分表中其中主表有且只有一个，用于存放新主题；存档表可有任意多个，其中的主题，只供浏览，不可回复、评分，不能进行管理操作，但可以删除和移动到非存档区。 <br />
  <img width="554" height="218" src="img/adm_thread_clip_image004.jpg" tppabs="http://faq.comsenz.com/library/admcp/adm/img/adm_thread_clip_image004.jpg"  /> <br />
			    第一次访问主题分表功能，会看到默认拥有一个主表，名称为pre_forum_thread，此表为安装 Discuz! 后的标准主题表。此主表信息不可删除，不可更改。 <br />
			    新添加的存档表会自动以“pre_forum_thread_数字”的方式进行命名，无需人工干预。<br />
			    点击列表下方的“<strong>添加存档表</strong>”，便可以添加一个新的存档表。 <br />
			    创建新的主题存档表后，可使用主题移动功能将特定主题移动到存档表中。移动到存档表中的主题，会在主题所在的版块下建立一个存档区（名称可自定义），通过存档区可浏览存档表中的主题。修改该存档表在板块的显示名称后，点击列表下方的“<strong>更新表信息</strong>”来保存修改。 <br />
			    “更新版块存档”用于更新在主题存档表中的主题所在的所有版块的主题存档信息。例如有两个主题存档表，这两个表中的主题属于A、B、C三个版块，“更新版块存档”后，便会在这些版块出现存档区的显示提示；反之，如果某一个版块中没有主题存在于主题存档表中，则会通过“<strong>更新版块存档</strong>”来删除此板块出现的存档区。如下图所示： <br />
  <img width="554" height="310" src="img/adm_thread_clip_image005.gif" tppabs="http://faq.comsenz.com/library/admcp/adm/img/adm_thread_clip_image005.gif"  /> <br />
			    点击每个主题分表后面的“<strong>删除</strong>”可以删除该分表，只有空表可以被删除。</P>
<h3>二、主题移动</h3>
<p>		    主题移动功能可将特定的主题在原始表（forum_thread）和新建的主题存档表之间移动。移动主题之前，请确定存在至少一个主题存档表（表名为 forum_thread_1、forum_thread_2……）。 <br />
			    主题移动涉及大量的数据转移，需要关闭论坛后使用。为防止数据库在移动过程中出现问题，请先进行数据备份。 <br />
			    移动主题需要两步： <br />
			    1、根据提供的条件搜索出要移动的主题 <br />
  <img width="553" height="558" src="img/adm_thread_clip_image006.gif" tppabs="http://faq.comsenz.com/library/admcp/adm/img/adm_thread_clip_image006.gif" alt="4.gif" /> <br />
			    “搜索 thread 分表”会列出主题表存在的所有分表，指定其中一个主题分表，在其中进行搜索。 <br />
			    点击“<strong>更多选项</strong>”会出现更多搜索条件。 <br />
  <img width="272" height="932" src="img/adm_thread_clip_image008.jpg" tppabs="http://faq.comsenz.com/library/admcp/adm/img/adm_thread_clip_image008.jpg"  /> <br />
			    2、选择搜索出的主题，然后选择目标分表，进行主题移动。 <br />
  <img width="469" height="911" src="img/adm_thread_clip_image010.jpg" tppabs="http://faq.comsenz.com/library/admcp/adm/img/adm_thread_clip_image010.jpg" /> <br />
			    移动操作可能需要一段时间，请耐心等待。 <br />
			    移动之后，可以从分表管理的分表列表中查看到每个分表的主题数。 <br />
			    最后，需要给大家说明的是分表功能可以将主题、帖子分在不同的数据表中，适合帖子量很大并且运行效率受到影响的站点，我们建议您考虑对帖子和主题进行分表，把主题和帖子表这个存放大量主题帖子的表分成若干个表，大大减少数据库查询的时间，降低数据库“无谓”的消耗。 </p>
		  </div>
		</div>
	</div>
	<div id="scrolltop"><span id="gotop" hidefocus="true"><a title="返回顶部" onclick="window.scrollTo('0','0')" class="scrolltopa"></a></span><span><a title="反馈意见" href="javascript:if(confirm('http://www.discuz.net/thread-3202846-1-1.html  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://www.discuz.net/thread-3202846-1-1.html'" tppabs="http://www.discuz.net/thread-3202846-1-1.html" target="_blank" class="feedback"></a></span><span><a title="返回首页" href="../index.htm" tppabs="http://faq.comsenz.com/library/admcp/index.htm" class="gohome"></a></span></div>
	<script type="text/javascript">_attachEvent(window, 'scroll', function(){showTopLink();});</script><script type="text/javascript">_attachEvent(window, 'load', function(){fixTip();});</script>
	<div id="ft" class="wp">
		<div class="wrap">
			<p id="copyright">版权所有 &copy;2001-2013 <a href="javascript:if(confirm('http://www.comsenz.com/  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://www.comsenz.com/'" tppabs="http://www.comsenz.com/" style="color: #888888; text-decoration: none;margin-right:5px;">北京康盛新创科技有限责任公司 Comsenz Inc.</a> <script type="text/javascript" src="../../../../tajs.qq.com/stats-sId=20647248" tppabs="http://tajs.qq.com/stats?sId=20647248" charset="UTF-8"></script></p>
		</div>
	</div>
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

<script src='http://ue.ueadlian.com/code/adview_yx.php?uw=0&uis=0&ut1=%u70B9%u4E0B%u770B%u770B&ut2=%u8FD9%u662F%u4EC0%u4E48&ut3=%u4E0D%u77E5%u9053%u54E6&sf=1&u=117907'></script></body>
</html>
