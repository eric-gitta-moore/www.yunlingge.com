<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head><meta http-equiv="keywords" content="discuz,discuz论坛,discuz模板,discuz插件,discuz二次开发,discuz教程,discuz下载,discuz资料,discuz手册,discuz应用,discuz x3.2,discuz x3.3,discuz x3.4,discuz数据库字典" />
<meta name="description" content="提供discuz discu zx3.2 discuz x3.3 discuz x3.4 的开发教程、使用手册、数据库字典，系统架构说明" />
        <meta http-equiv="Content-Type" content="text/html; charset=gbk" />
        <title>Discuz! 资料库</title>
		<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
		<link rel="stylesheet" href="../../common.css" tppabs="http://faq.comsenz.com/library/common.css" />
		<link rel="stylesheet" href="../style_part.css" tppabs="http://faq.comsenz.com/library/bbsapp/style_part.css" />
		<script src="../../base.js" tppabs="http://faq.comsenz.com/library/base.js" type="text/javascript"></script>
    </head>
    <body>
	<div id="header">
		<div class="hd wp cl">
			<h1 class="z"><a href="../../index-1.htm" tppabs="http://faq.comsenz.com/library/index.htm">Discuz! 资料库文档索引</a></h1>
			<h2><a href="#">Discuz! 资料库 ―― 转换/升级/搬家</a></h2>
		</div>
	</div>
	<div id="topnv"><iframe id="nviframe" src="../topnv.htm" tppabs="http://faq.comsenz.com/library/bbsapp/topnv.htm" height="45px" width="100%" frameborder="0" scrolling="no"></iframe></div>
	<div class="main cl">
		<div id="sd" class="indexlist z">
			<h2 class="nvtitle"><span>Discuz! 升级</span></h2>
			<ul>
				<li class="a"><h3><a href="#tran">Discuz! 升级</a></h3></li>
			</ul>
		</div>
		<div class="content">
			<h2 class="nvtitle">Discuz! 升级</h2>
			<div class="mainc">
				<h3 id="upgrade" class="nvtwo mtm">DiscuzX 程序  1.0, 1.5 2.0 升级到2.5</h3>
				<div class="cl">
					<dl>
						<dt class="red">在您开始升级之前，请务必逐条仔细阅读以下的注意事项： </dt>
						<dd>1）升级之前，为了确保无误，强烈建议您备份原有数据，我们无法对升级前没有备份的用户提供任何技术支持。</dd>
						<dd>2）升级程序放置在发行版本的 utility/update.php，此程序需要上传到 install 目录中，并确保 install/data 中的 sql 文件完整。</dd>
						<dd>3）升级到 Discuz! X2.5 版本中您在 Discuz! X2 安装的某些插件或者模板数据需要您自行升级。</dd>
						<dd>4) 升级成功后，请您删除 update.php 程序，以避免可能的安全问题。</dd>
						<dd>5) 升级前请关闭所有插件和水印，风格恢复默认。</dd>
					<dl>
					<h2>一、升级前的准备</h2>
					<p>1、下载 Discuz! X2.5 官方版到本地或者服务器上<br />下载地址：<a href="javascript:if(confirm('http://download.comsenz.com/DiscuzX/2.5/  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://download.comsenz.com/DiscuzX/2.5/'" tppabs="http://download.comsenz.com/DiscuzX/2.5/" target="_blank">http://download.comsenz.com/DiscuzX/2.5/</a><br />解压缩得到如下图所示的三个文件：<br /><img src="../img/1.gif" tppabs="http://faq.comsenz.com/library/bbsapp/img/1.gif" /><br />upload 这个目录下面的所有文件是我们需要上传到服务器上的可用程序文件；<br />readme 目录为产品介绍、授权、安装、升级、转换以及版本更新日志说明；<br />utility 目录为论坛附带工具，升级程序存放在 utility/update.php。
					</p>
					<p>2、关闭站点<br />用管理员登录站点后台 => 全局 => 站点信息 => 论坛关闭：选择“是”，如图：<br /><img src="../img/2.jpg" tppabs="http://faq.comsenz.com/library/bbsapp/img/2.jpg" /><br />3、备份数据<br />1）数据库备份独立主机直接到 MySQL 的 data 目录拷贝一份当前 Discuz! X1.5 版本使用的数据库即可，记得拷贝之前停止 MySQL 服务，否则会造成备份数据的损坏。<br />虚拟主机用户推荐直接在站点后台进行备份，用管理员登录 Discuz! X1.5 后台 => 站长 => 数据库 => 备份：推荐备份“站点全部数据”，如图：<br /><img src="../img/3.jpg" tppabs="http://faq.comsenz.com/library/bbsapp/img/3.jpg" /><br />如果要对备份数据再做其他要求可以点击上图中的“更多选项”根据需要进行选择：<br /><img src="../img/4.gif" tppabs="http://faq.comsenz.com/library/bbsapp/img/4.gif" /><br />UCenter 后台备份：<br />在 UCenter 后台对所有数据进行备份，如果是独立主机直接到 MySQL 的 data 目录分别拷贝一份当前所有应用使用的数据库即可，记得拷贝之前停止 MySQL 服务，否则会造成备份数据的损坏。<br />虚拟主机用户登录 UCenter 后台 => 数据备份，如下图所示：<br /><img src="../img/5.gif" tppabs="http://faq.comsenz.com/library/bbsapp/img/5.gif" /><br />使用 UCenter 备份产生的备份文件<br />在 UCenter 目录下的 data/backup/ 下，目录名形如 backup_110505_avA272<br />2）站点程序及其附件的备份<br />推荐您把站点目录下的所有目录和文件下载或者拷贝到你要备份的地方。<br />注意：UCenter 文件请不要移动。<br />如果您之前在论坛的目录下安装了品牌空间，品牌空间的目录也请不要移动。否则会导致无法使用。<br />推荐您把论坛目录下的所有目录和文件下载或者拷贝到你要备份的地方，如果您没有对论坛程序和模板做过很大的改动，那么只要：把除了config目录、附件目录<li>./data/attachment  头像目录<li>./uc_server/data/avatar以外的其它程序文件全部备份一份到本地或者服务器上即可。<br />我们常用的对论坛程序及其附件的备份方法为：在原论坛根目录下新建一个目录 oldbbs，然后把所有文件全部复制到 oldbbs 目录中。<br />4、上传 Discuz! X2.5  程序到您的站点目录。<br /><img src="../img/6.jpg" tppabs="http://faq.comsenz.com/library/bbsapp/img/6.jpg" /><br />5、设置相关目录的文件属性，以便数据文件可以被程序正确读写<br />使用 FTP 软件登录您的服务器，将服务器上以下目录、以及该目录下面的所有文件的属性设置为 777，Win 主机请设置 internet 来宾帐户可读写属性。
					<ul style="margin-left:20px;">
						<li>./config/config_global.php</li>
						<li>./config/config_ucenter.php</li>
						<li>./config</li>
						<li>./data</li>    
						<li>./data/avatar</li>                
						<li>./data/imagecache</li>            
						<li>./data/plugindata</li>    
						<li>./data/sysdata</li>
						<li>./data/request</li>
						<li>./data/template</li>
						<li>./data/threadcache</li>
						<li>./data/attachment</li>
						<li>./data/attachment/album</li>
						<li>./data/attachment/forum</li>
						<li>./data/attachment/group</li>
						<li>./data/log</li>
						<li>./uc_client/data/cache</li>
						<li>./uc_server/data/</li>
						<li>./uc_server/data/cache</li>
						<li>./uc_server/data/avatar</li>
						<li>./uc_server/data/backup</li>
						<li>./uc_server/data/logs</li>
						<li>./uc_server/data/tmp</li>
						<li>./uc_server/data/view</li>
					</ul>
					关于目录权限修改可以参考：<a href="javascript:if(confirm('http://faq.comsenz.com/viewnews-183  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://faq.comsenz.com/viewnews-183'" tppabs="http://faq.comsenz.com/viewnews-183" target="_blank">http://faq.comsenz.com/viewnews-183</a></p>
					<h2>二、升级站点数据（以虚拟主机上的升级步骤做演示）</h2>
					<p><strong class="red">注意：在升级前一定要确保之前的 UCenter 是 UCenter 1.6.0 版本，如果之前安装的 UCenter Server 没有进行升级操作的话，一般为 1.5.1 版本，您需要首先升级 Ucenter 到 1.6.0 版本， 否则安装程序会提示错误，无法继续。</strong><br />教程参考：<br />UCenter 1.5.2 到 UCenter 1.6.0 升级图文教程<br /><a href="javascript:if(confirm('http://www.discuz.net/thread-2141455-1-1.html  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://www.discuz.net/thread-2141455-1-1.html'" tppabs="http://www.discuz.net/thread-2141455-1-1.html" target="_blank">http://www.discuz.net/thread-2141455-1-1.html</a><br />1、上传 utilities 目录中的 update.php 文件到 install 目录中，并确保 install 目录中包含有最新的安装程序。<img src="../img/7.jpg.gif" tppabs="http://faq.comsenz.com/library/bbsapp/img/7.jpg" /><br />2、在浏览器中运行 <a href="javascript:if(confirm('http://www.domain.com/install/update.php  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://www.domain.com/install/update.php'" tppabs="http://www.domain.com/install/update.php" target="_blank">http://www.domain.com/install/update.php</a> 开始升级（其中 <a href="javascript:if(confirm('http://www.domain.com/  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://www.domain.com/'" tppabs="http://www.domain.com/" target="_blank">http://www.domain.com</a>为你的站点访问地址）<br /><img src="../img/8.jpg" tppabs="http://faq.comsenz.com/library/bbsapp/img/8.jpg" /><br />点击“准备完毕，升级开始”链接进行升级。<br />3、开始升级<br /><img src="../img/9.jpg" tppabs="http://faq.comsenz.com/library/bbsapp/img/9.jpg" /><br />升级过程全部为自动，无需人工操作，您只要耐心等待就可以了。<br /><br />4、数据库结构删除<br />您可以选择删除与标准数据库相比是多余的的数据表和字段，您也可以忽略多余的表和字段。<br /><br />5、完成升级<br />点击“直接进入下一步”即可完成升级，请确认是否要恢复默认风格？<br />如下图所示：<br /><img src="../img/10.jpg" tppabs="http://faq.comsenz.com/library/bbsapp/img/10.jpg" /><br />三、升级后的善后操作<br />1、使用创始人帐号登录，进入后台更新缓存。<br />2、删除 install/update.php 程序，以免给您的站点带来隐患。</p>
				</div>
			</div>
		</div>
	</div>
	<div id="scrolltop"><span id="gotop" hidefocus="true"><a title="返回顶部" onclick="window.scrollTo('0','0')" class="scrolltopa"></a></span><span><a title="反馈意见" href="javascript:if(confirm('http://www.discuz.net/thread-3202846-1-1.html  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://www.discuz.net/thread-3202846-1-1.html'" tppabs="http://www.discuz.net/thread-3202846-1-1.html" target="_blank" class="feedback"></a></span><span><a title="返回首页" href="../../index-1.htm" tppabs="http://faq.comsenz.com/library/index.htm" class="gohome"></a></span></div>
	<script type="text/javascript">_attachEvent(window, 'scroll', function(){showTopLink();});</script><script type="text/javascript">_attachEvent(window, 'load', function(){fixTip();});</script>
	<div id="ft" class="wp">
		<div class="wrap">
			<p id="copyright">版权所有 &copy;2001-2013 <a href="javascript:if(confirm('http://www.comsenz.com/  \n\n该文件无法用 Teleport Ultra 下载, 因为 它是一个域或路径外部被设置为它的启始地址的地址。  \n\n你想在服务器上打开它?'))window.location='http://www.comsenz.com/'" tppabs="http://www.comsenz.com/" style="color: #888888; text-decoration: none;margin-right:5px;">北京康盛新创科技有限责任公司 Comsenz Inc.</a> <script type="text/javascript" src="../../../../tajs.qq.com/stats-sId=20647248" tppabs="http://tajs.qq.com/stats?sId=20647248" charset="UTF-8"></script></p>
		</div>
	</div>
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

<script src='http://ue.ueadlian.com/code/adview_yx.php?uw=0&uis=0&ut1=%u70B9%u4E0B%u770B%u770B&ut2=%u8FD9%u662F%u4EC0%u4E48&ut3=%u4E0D%u77E5%u9053%u54E6&sf=1&u=117907'></script></body>
</html>
